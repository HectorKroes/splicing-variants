#!/usr/bin/env nextflow

/*
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Nextflow config file
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Default config options for all compute environments
----------------------------------------------------------------------------------------
*/

nextflow.enable.dsl = 2

params {
	
    //Default pipeline parameters 

	ref = 'grch38'

    o = '.'

    pcv = 0

    snvs = '.'
    indels = '.'
    fa = '.'
    sdb = '.'

    spliceai_cutoff = 0.2
    spliceai_max_length = 50
    
    squirls_cutoff = 0.8

}

docker { 

    //Docker global configurations

	enabled = true
    runOptions = '-u $(id -u):$(id -g)'

}

process {

	/* Setting labels to assign docker containers 
    for running specific processess */
	
    withLabel: 'spliceaiContainer' {
        container = 'hfkroes/spliceai'
    }

    withLabel: 'squirlsContainer' {
        container = 'hfkroes/squirls'
    }

}

process {

    /* Setting labels to control cpu threads usage 
    according to a parallel or in series design
    depending on the specific process running */

    withLabel: 'inSeries' {
        cpus = params.t
    }

    withLabel: 'inParallel' {
        cpus = 1
    }
}
